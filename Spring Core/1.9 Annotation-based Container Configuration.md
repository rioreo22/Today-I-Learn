## [1.9. Annotation-based Container Configuration](https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-annotation-config)

# 1.9. Annotation-based Container Configuration

> ## Spring Configuration 할 때, Annotation 낫냐 XML이 낫냐?
> 그 대답은 "케바케"
> + annotations provide a lot of context in their declaration, leading to shorter and more concise configuration
> + XML excels at wiring up components without touching their source code or recompiling them.
> 
> 어떤 개발자는 소스에 가깝게 설정이 보기좋게 붙어있는걸 선호하고, 어떤 개발자는 설정이 여러 곳에 흩어지면 보기 힘들다고 생각하는 사람도 있다. 
>
> 그리고 Spring은 둘 다 섞어서 지원 가능.


`BeanPostProcessor`을 사용한다.
+ Spring 2.0 : @Required (생성자 위에 붙여서 필요한 args setter 만들어주는 애노테이션)
+ Spring 2.5 : 
    + `@Autowired` 
    + `@PostCoustruct`, `@PreDestroy` 같은 `JSR-250 annotations` 지원
+ Spring 3.0 : 
    + `JSR-330 (Dependency Injection for Java)` 지원.
        + `javax.inject` 패키지에 `@Injext`, `@Named`

> ### **Annotation Injection은 XML Injection 전에 일어난다.**
>
> 따라서, XML Configuration은 annotations이 설정한 properties, wiring 설정들을 덮어버린다.

### Post-processor
빈 정의에 post-processor 등록 가능.

but they can also be implicitly registered by including the following tag in an XML-based Spring configuration

각각 등록해도 되고, 아래 설정으로 등록해도 된다.

``` xml
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
        https://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context
        https://www.springframework.org/schema/context/spring-context.xsd">

    <context:annotation-config/>

</beans>
```

`context` namespace의 포함을 유의.

`<context:annotation-config/>` 요소는 아래의 post-processor를 내재적으로 등록한다.
> `<context:annotation-config/>`는 같은 application context에 있는 빈들의 annotation만 찾아본다.
>
> 예를 들어, 니가 `WepApplicationContext`의 `DispatcherServlet`에다가 `<context:annotation-config/>`를 등록했다면, controller에 `@Autowired`된 빈들만 찾아보고, Service는 찾아보지 않는다.

+ `ConfigurationClassPostProcessor`
+ `AutowiredAnnotationBeanPostProcessor`
+ `CommonAnnotationBeanPostProcessor`
+ `PersistenceAnnotationBeanPostProcessor`
+ `EventListenerMethodProcessor`

## `@Required`

The `@Required` annotation applies to bean property setter methods, as in the following example:

```java
public class SimpleMovieLister {

    private MovieFinder movieFinder;

    @Required
    public void setMovieFinder(MovieFinder movieFinder) {
        this.movieFinder = movieFinder;
    }

    // ...
}
```

